-- Create test data for the application
-- Create test user. Username: test, Password: mojeheslo
INSERT INTO users (id, username, password_hash, email) 
VALUES (1, 'test', E'\$2b\$12\$ZLiOXdFIZGkju6ikIt6rKuThNEJ3w2cg19oGMrMjLRmgR/nqjf7Qq', 'test@example.com');

-- Create test vehicle
INSERT INTO vehicles (id, name, imei, color, status) 
VALUES (1, 'ArduinoTest', 'TEST', '#800080', 'inactive');

-- Create test user-vehicle assignment
INSERT INTO user_vehicle_assignments (id, user_id, vehicle_id, start_date) 
VALUES (1, 1, 1, '2024-10-30 12:34:56');

-- Create test route
INSERT INTO routes (id, assignment_id, start_time, end_time) 
VALUES (1, 1, '2024-10-30 12:34:56', '2024-10-31 22:59:59');

-- Create test positions
INSERT INTO positions (route_id, timestamp, location, speed) VALUES
(1, '2024-10-30 12:34:56', ST_GeomFromText('POINT(2.29430600 48.85884400)', 4326), 45.2),
(1, '2024-10-31 15:55:55', ST_GeomFromText('POINT(18.75639340 49.20941540)', 4326), 50.7),
(1, '2024-10-31 17:32:27', ST_GeomFromText('POINT(18.75753210 49.20953370)', 4326), 48.3),
(1, '2024-10-31 17:33:46', ST_GeomFromText('POINT(18.75891880 49.20987320)', 4326), 52.1),
(1, '2024-10-31 17:35:04', ST_GeomFromText('POINT(18.75270080 49.21253590)', 4326), 47.8),
(1, '2024-10-31 17:36:23', ST_GeomFromText('POINT(18.74916840 49.21482470)', 4326), 43.9),
(1, '2024-10-31 17:37:41', ST_GeomFromText('POINT(18.75881960 49.21878430)', 4326), 55.4),
(1, '2024-10-31 17:39:00', ST_GeomFromText('POINT(18.76187130 49.22370150)', 4326), 62.1),
(1, '2024-10-31 17:40:18', ST_GeomFromText('POINT(18.77884100 49.22099690)', 4326), 51.6),
(1, '2024-10-31 17:41:37', ST_GeomFromText('POINT(18.79811670 49.21588520)', 4326), 58.3),
(1, '2024-10-31 17:42:56', ST_GeomFromText('POINT(18.82347870 49.20926280)', 4326), 49.2),
(1, '2024-10-31 17:44:14', ST_GeomFromText('POINT(18.84906960 49.20539470)', 4326), 53.7),
(1, '2024-10-31 17:45:33', ST_GeomFromText('POINT(18.86943240 49.20897670)', 4326), 60.5),
(1, '2024-10-31 17:46:51', ST_GeomFromText('POINT(18.88503270 49.21338270)', 4326), 44.1),
(1, '2024-10-31 17:48:10', ST_GeomFromText('POINT(18.89714430 49.22196960)', 4326), 48.9),
(1, '2024-10-31 17:49:28', ST_GeomFromText('POINT(18.91486930 49.22620010)', 4326), 52.7),
(1, '2024-10-31 17:50:47', ST_GeomFromText('POINT(18.92914010 49.23371510)', 4326), 57.1),
(1, '2024-10-31 17:52:06', ST_GeomFromText('POINT(18.94086650 49.23963170)', 4326), 61.3),
(1, '2024-10-31 17:53:24', ST_GeomFromText('POINT(18.95716860 49.24353030)', 4326), 58.6),
(1, '2024-10-31 17:54:43', ST_GeomFromText('POINT(18.97829250 49.24688720)', 4326), 62.9),
(1, '2024-10-31 17:56:01', ST_GeomFromText('POINT(18.99870110 49.24892040)', 4326), 65.1),
(1, '2024-10-31 17:57:20', ST_GeomFromText('POINT(19.01761050 49.25574490)', 4326), 70.3),
(1, '2024-10-31 17:58:39', ST_GeomFromText('POINT(19.03416060 49.25744250)', 4326), 73.2),
(1, '2024-10-31 18:00:01', ST_GeomFromText('POINT(19.05167010 49.25771330)', 4326), 75.8),
(1, '2024-10-31 18:01:20', ST_GeomFromText('POINT(19.06879230 49.25819780)', 4326), 78.6),
(1, '2024-10-31 18:03:57', ST_GeomFromText('POINT(19.09805680 49.26343150)', 4326), 66.4),
(1, '2024-10-31 18:05:16', ST_GeomFromText('POINT(19.11503600 49.26664730)', 4326), 59.9),
(1, '2024-10-31 18:06:34', ST_GeomFromText('POINT(19.13742830 49.26577000)', 4326), 62.5),
(1, '2024-10-31 18:07:53', ST_GeomFromText('POINT(19.15108110 49.26116180)', 4326), 57.8),
(1, '2024-10-31 18:22:16', ST_GeomFromText('POINT(19.20231820 49.19734570)', 4326), 45.0),
(1, '2024-10-31 18:23:34', ST_GeomFromText('POINT(19.21933560 49.20159530)', 4326), 49.1),
(1, '2024-10-31 18:24:52', ST_GeomFromText('POINT(19.23392680 49.20606230)', 4326), 52.3),
(1, '2024-10-31 18:26:11', ST_GeomFromText('POINT(19.24656680 49.20550540)', 4326), 47.2),
(1, '2024-10-31 18:27:30', ST_GeomFromText('POINT(19.26291850 49.20926280)', 4326), 55.6),
(1, '2024-10-31 18:28:48', ST_GeomFromText('POINT(19.27973560 49.21364210)', 4326), 58.1),
(1, '2024-10-31 18:30:07', ST_GeomFromText('POINT(19.29529190 49.21274570)', 4326), 50.4),
(1, '2024-10-31 18:31:25', ST_GeomFromText('POINT(19.30121230 49.20600510)', 4326), 46.3),
(1, '2024-10-31 18:32:44', ST_GeomFromText('POINT(19.30438040 49.19461820)', 4326), 40.9),
(1, '2024-10-31 18:34:03', ST_GeomFromText('POINT(19.31041150 49.18439100)', 4326), 38.7);

-- Update route_geom and total_distance for the route
UPDATE routes 
SET route_geom = ST_GeomFromText('LINESTRING(2.29430600 48.85884400, 18.75639340 49.20941540, 18.75753210 49.20953370, 18.75891880 49.20987320, 18.75270080 49.21253590, 18.74916840 49.21482470, 18.75881960 49.21878430, 18.76187130 49.22370150, 18.77884100 49.22099690, 18.79811670 49.21588520, 18.82347870 49.20926280, 18.84906960 49.20539470, 18.86943240 49.20897670, 18.88503270 49.21338270, 18.89714430 49.22196960, 18.91486930 49.22620010, 18.92914010 49.23371510, 18.94086650 49.23963170, 18.95716860 49.24353030, 18.97829250 49.24688720, 18.99870110 49.24892040, 19.01761050 49.25574490, 19.03416060 49.25744250, 19.05167010 49.25771330, 19.06879230 49.25819780, 19.09805680 49.26343150, 19.11503600 49.26664730, 19.13742830 49.26577000, 19.15108110 49.26116180, 19.20231820 49.19734570, 19.21933560 49.20159530, 19.23392680 49.20606230, 19.24656680 49.20550540, 19.26291850 49.20926280, 19.27973560 49.21364210, 19.29529190 49.21274570, 19.30121230 49.20600510, 19.30438040 49.19461820, 19.31041150 49.18439100)', 4326),
    total_distance = 15432
WHERE id = 1;

-- Reset sequence values for table users, vehicles, user_vehicle_assignments and routes
SELECT setval('users_id_seq', (SELECT MAX(id) FROM users) + 1);
SELECT setval('vehicles_id_seq', (SELECT MAX(id) FROM vehicles) + 1);
SELECT setval('user_vehicle_assignments_id_seq', (SELECT MAX(id) FROM user_vehicle_assignments) + 1);
SELECT setval('routes_id_seq', (SELECT MAX(id) FROM routes) + 1);
